<div class="space-y-6 w-3/4 max-w-lg">
  <label class="block text-xl font-bold text-gray-700"><%= t('posts.show.title') %></label>

  <div class="items-center justify-center">
    <div class="focus:outline-none mb-7 bg-white p-6 shadow rounded">
      <!-- „Çø„Ç§„Éà„É´„Å®ÊäïÁ®øËÄÖÊÉÖÂ†± -->
      <div class="flex items-start justify-between border-b border-gray-200 pb-6 mb-4">
        <div class="flex-1">
          <p class="focus:outline-none text-lg font-medium leading-5 text-gray-800">
            <%= @post.title %>
          </p>
          <p class="focus:outline-none text-sm leading-normal pt-2 text-gray-500">
            <%= t('posts.show.author_label') %> <%= link_to @post.user.nickname, user_path(@post.user), class: "hover:text-indigo-600 hover:font-bold" %>
            |
            <%= t('posts.show.posted_at_label') %> <%= l @post.created_at, format: :short %>
          </p>
        </div>

        <!-- Á∑®ÈõÜ„ÉªÂâäÈô§„Éú„Çø„É≥ -->
        <% if user_signed_in? && @post.user_id == current_user.id %>
          <div class="flex gap-2 ml-4">
            <!-- Á∑®ÈõÜ„Éú„Çø„É≥ -->
            <%= link_to t('posts.show.edit'), edit_post_path(@post), 
                class: "text-sm bg-transparent hover:bg-green-500 text-green-700 hover:text-white py-1 px-3 border border-green-500 hover:border-transparent rounded hover:cursor-pointer transition-colors" %>
            
            <!-- ÂâäÈô§„Éú„Çø„É≥ÔºàÁ¢∫Ë™ç„É°„ÉÉ„Çª„Éº„Ç∏‰ªò„ÅçÔºâ -->
            <%= button_to t('posts.show.delete'), post_path(@post),
                method: :delete,
                data: { turbo_confirm: t('posts.show.delete_confirm') },
                class: "text-sm bg-transparent hover:bg-red-500 text-red-700 hover:text-white py-1 px-3 border border-red-500 hover:border-transparent rounded hover:cursor-pointer transition-colors" %>
          </div>
        <% end %>
      </div>

      <!-- Êú¨Êñá -->
      <div class="px-2 mb-4">
        <p class="focus:outline-none text-sm leading-6 text-gray-600">
          <%= @post.content %>
        </p>
      </div>

      <!-- „ÅÑ„ÅÑ„Å≠Ê©üËÉΩ -->
      <div class="px-2 py-4 border-t border-gray-200">
        <%= render "posts/like_button", post: @post, user: current_user %>
      </div>

      <!-- „Çø„Ç∞Ë°®Á§∫ -->
      <% if @post.tags.any? %>
        <div class="px-2 py-4 border-t border-gray-200">
          <p class="text-sm font-medium text-gray-700 mb-3">
            üè∑Ô∏è <%= t('posts.show.tags_label') %>
          </p>
          <div class="flex flex-wrap gap-2">
            <% @post.tags.each do |tag| %>
              <%= link_to tag.name, 
                  posts_path(tag_id: tag.id), 
                  class: "inline-block bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-xs font-medium hover:bg-indigo-200 hover:text-indigo-900 transition-colors" %>
            <% end %>
          </div>
        </div>
      <% end %>
      <div class="mt-2">
        <p class="text-lg"><%= t('posts.show.comments.heading') %></p>
      
        <!-- „Ç≥„É°„É≥„Éà‰ΩúÊàê„Éï„Ç©„Éº„É† -->
        <% if user_signed_in? %>
          <% if @post.user_id != current_user.id %>
	          <%= form_with  class: "text-center", model: [@post, Comment.new], local: true do |form| %>
	            <div class="mt-1">
	              <%= form.text_area :content, placeholder: t('posts.show.comments.placeholder'), class: "bg-gray-50 w-full pl-1", rows: 3 %>
	            </div>
	            <%= form.submit t('posts.show.comments.submit'), class: "mt-2 justify-center flex-1 px-4 py-2 bg-indigo-600 text-white font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 cursor-pointer" %>
	          <% end %>
					<% end %> 						
	      <% else %>
	        <p class="mt-2"><span class="text-blue-500 mr-2"><%= link_to t('navbar.login'), new_user_session_path %></span><%= t('posts.show.comments.login_prompt_suffix') %></p>
	      <% end %>
      
        <!-- „Ç≥„É°„É≥„Éà‰∏ÄË¶ß -->
        <div class="mt-6">
          <% @post.comments.each do |comment| %>
            <div class="mt-4 border-t-2 border-gray-400">
	            <div class="mt-4">
		            <p class="comment-author"><strong><%= comment.user.nickname %></strong></p>
		            <p class="my-2"><%= comment.content %></p>
		            <div class="justify-end flex">
                          <small class="text-md mr-2 items-center flex"><%= time_ago_in_words(comment.created_at) %><%= t('posts.show.comments.ago') %></small>
                          <% if user_signed_in? && comment.user == current_user %>
                            <%= button_to t('posts.show.comments.delete'), post_comment_path(@post, comment),
                                    method: :delete, 
                                    data: { turbo_confirm: t('posts.show.comments.delete_confirm') }, 
                                    class: "text-white bg-red-400 py-2 px-4 rounded-md cursor-pointer" %>
                          <% end %>
		            </div>
	            </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
